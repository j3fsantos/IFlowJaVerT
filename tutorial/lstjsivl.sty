\lstdefinelanguage{JSIVL}{
  keywords={not, base, field, typeOf, skip, label, goto, with,
    hasField, delete, eval, new, ref, return_label, throw_label, result_var,procedure,protoField,protoObj},
  keywordstyle={\ttfamily\color{dkviolet}},
  ndkeywords={null, undefined, empty, NullType, UndefinedType, BooleanType,
    StringType, NumberType, ObjectType, ReferenceType, VariableReference,
    lnotimplemented, Boolean, Number, String, Reference, lrerror, lop, lg,
    proto, lnotimplemented, lg, empty, lop, undefined, lrerr,
     lfp, lterr, lserr, scope, fid, \#lnotimplemented, \#lg, \#empty, \#lop,       
    \#undefined, \#lrerr,\#proto,
     \#lfp, \#lterr, \#lserr, \#scope, \#fid},
  ndkeywordstyle={\ttfamily\color{dkgreen}},
  identifierstyle={\ttfamily\color{black}},
  sensitive=true,
  comment=[l]{//},
  morecomment=[s]{/*}{*/},
  commentstyle={\ttfamily\color{red}},
  stringstyle=\ttfamily,
  morestring=[b]',
  morestring=[b]",
  columns=[l]fullflexible,
  extendedchars=true,
  basicstyle=\small,
  showstringspaces=false,
  showspaces=false,
  tabsize=2,
  breaklines=true,
  showtabs=false,
  captionpos=b
}[keywords,comments,strings]


\lstnewenvironment{ivll}{\lstset{language=JSIVL,basicstyle=\normalsize}}{}
\lstnewenvironment{ivlls}{\lstset{language=JSIVL,basicstyle=\scriptsize}}{}
\lstnewenvironment{ivlll}{\lstset{language=JSIVL,basicstyle=\small}}{}
% For inlining code in text
\def\ivlinline{\lstinline[language=JSIVL, basicstyle=\small]}
% for inlining code in tables and maths
\def\ivlinlines{\lstinline[language=JSIVL, basicstyle=\normalsize]}

