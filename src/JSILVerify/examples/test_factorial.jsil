(** Totals: 0 fails and 1 pass **)

pred factorial (n, f) : (n == 0) * (f == 1) * types(n: Num),
						(!(n <# 1)) * (#n1 == (n - 1)) * factorial(#n1, #f1) * (f == #f) * (f == (n * #f1)) * types(n: Num, #n1: Num, #f: Num);

spec factorial (n)
	[[ (n == #n) * (0 <=# n) * types(#n : Num)]]
	[[ types(ret : Num) * factorial(#n, ret) ]]
	normal
	
proc factorial (n) {
	xret := 1;
pos:
	goto [n = 0] rlab rec;
rec:
	xret := "factorial" (n - 1);
	xret := n * xret;
	skip;
	[* fold factorial(n, xret) *]
rlab:
	skip
} with {
	ret: xret, rlab;
};
